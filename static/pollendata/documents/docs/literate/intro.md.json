{
    "attributes": {
        "backlinks": [
            {
                "tag": "document",
                "title": "toc",
                "docid": "/documents/toc.md"
            }
        ],
        "path": "/home/lorenz/.julia/dev/DataAugmentation/docs/literate/intro.md",
        "title": "DataAugmentation.jl"
    },
    "tag": "document",
    "children": [
        {
            "attributes": {},
            "tag": "h1",
            "children": [
                {
                    "mimes": {
                        "text/plain": "DataAugmentation"
                    }
                },
                {
                    "mimes": {
                        "text/plain": "."
                    }
                },
                {
                    "mimes": {
                        "text/plain": "jl"
                    }
                }
            ]
        },
        {
            "attributes": {},
            "tag": "p",
            "children": [
                {
                    "mimes": {
                        "text/plain": "This library provides data transformations for machine and deep learning"
                    }
                },
                {
                    "mimes": {
                        "text/plain": "."
                    }
                },
                {
                    "mimes": {
                        "text/plain": " At the moment, it focuses on spatial data (think images, keypoint data and masks), but that is owed only to my current work"
                    }
                },
                {
                    "mimes": {
                        "text/plain": "."
                    }
                },
                {
                    "mimes": {
                        "text/plain": " The extensible abstractions should fit other domains as well"
                    }
                },
                {
                    "mimes": {
                        "text/plain": "."
                    }
                }
            ]
        },
        {
            "attributes": {},
            "tag": "p",
            "children": [
                {
                    "mimes": {
                        "text/plain": "For the most part, the transformations themselves are not very complex"
                    }
                },
                {
                    "mimes": {
                        "text/plain": "."
                    }
                },
                {
                    "mimes": {
                        "text/plain": " The challenge this library tackles is to reconcile an easy"
                    }
                },
                {
                    "mimes": {
                        "text/plain": "-"
                    }
                },
                {
                    "mimes": {
                        "text/plain": "to"
                    }
                },
                {
                    "mimes": {
                        "text/plain": "-"
                    }
                },
                {
                    "mimes": {
                        "text/plain": "use, composable interface with performant execution"
                    }
                },
                {
                    "mimes": {
                        "text/plain": "."
                    }
                }
            ]
        },
        {
            "attributes": {},
            "tag": "p",
            "children": [
                {
                    "mimes": {
                        "text/plain": "The key abstractions are "
                    }
                },
                {
                    "attributes": {},
                    "tag": "code",
                    "children": [
                        {
                            "mimes": {
                                "text/plain": "Transform"
                            }
                        }
                    ]
                },
                {
                    "mimes": {
                        "text/plain": "s, the transformation to apply, and "
                    }
                },
                {
                    "attributes": {},
                    "tag": "code",
                    "children": [
                        {
                            "mimes": {
                                "text/plain": "Item"
                            }
                        }
                    ]
                },
                {
                    "mimes": {
                        "text/plain": "s which contain the data to be transformed"
                    }
                },
                {
                    "mimes": {
                        "text/plain": "."
                    }
                },
                {
                    "mimes": {
                        "text/plain": " "
                    }
                },
                {
                    "attributes": {
                        "reftype": "symbol",
                        "document_id": "references/DataAugmentation.apply"
                    },
                    "tag": "reference",
                    "children": [
                        {
                            "attributes": {},
                            "tag": "code",
                            "children": [
                                {
                                    "mimes": {
                                        "text/plain": "apply"
                                    }
                                }
                            ]
                        }
                    ]
                },
                {
                    "attributes": {},
                    "tag": "code",
                    "children": [
                        {
                            "mimes": {
                                "text/plain": "(tfm, item)"
                            }
                        }
                    ]
                },
                {
                    "mimes": {
                        "text/plain": ", as the name gives away, applies a transformation to an item"
                    }
                },
                {
                    "mimes": {
                        "text/plain": "."
                    }
                },
                {
                    "mimes": {
                        "text/plain": "  For example, given an "
                    }
                },
                {
                    "attributes": {
                        "reftype": "symbol",
                        "document_id": "references/DataAugmentation.Image"
                    },
                    "tag": "reference",
                    "children": [
                        {
                            "attributes": {},
                            "tag": "code",
                            "children": [
                                {
                                    "mimes": {
                                        "text/plain": "Image"
                                    }
                                }
                            ]
                        }
                    ]
                },
                {
                    "mimes": {
                        "text/plain": " item, we can resize it with the "
                    }
                },
                {
                    "attributes": {
                        "reftype": "symbol",
                        "document_id": "references/DataAugmentation.CenterResizeCrop"
                    },
                    "tag": "reference",
                    "children": [
                        {
                            "attributes": {},
                            "tag": "code",
                            "children": [
                                {
                                    "mimes": {
                                        "text/plain": "CenterResizeCrop"
                                    }
                                }
                            ]
                        }
                    ]
                },
                {
                    "mimes": {
                        "text/plain": " transformation"
                    }
                },
                {
                    "mimes": {
                        "text/plain": "."
                    }
                }
            ]
        },
        {
            "attributes": {
                "lang": "julia"
            },
            "tag": "codeblock",
            "children": [
                {
                    "attributes": {},
                    "tag": "CST_DEFINITION",
                    "children": [
                        {
                            "attributes": {},
                            "tag": "CST_OPERATOR",
                            "children": [
                                {
                                    "attributes": {},
                                    "tag": "CST_IDENTIFIER",
                                    "children": [
                                        {
                                            "mimes": {
                                                "text/plain": "item "
                                            }
                                        }
                                    ]
                                },
                                {
                                    "attributes": {},
                                    "tag": "CST_OPERATOR",
                                    "children": [
                                        {
                                            "mimes": {
                                                "text/plain": "= "
                                            }
                                        }
                                    ]
                                },
                                {
                                    "attributes": {},
                                    "tag": "CST_call",
                                    "children": [
                                        {
                                            "attributes": {
                                                "reftype": "symbol",
                                                "document_id": "references/DataAugmentation.Image"
                                            },
                                            "tag": "reference",
                                            "children": [
                                                {
                                                    "mimes": {
                                                        "text/plain": "Image"
                                                    }
                                                }
                                            ]
                                        },
                                        {
                                            "attributes": {},
                                            "tag": "CST_BRACKET",
                                            "children": [
                                                {
                                                    "mimes": {
                                                        "text/plain": "("
                                                    }
                                                }
                                            ]
                                        },
                                        {
                                            "attributes": {},
                                            "tag": "CST_IDENTIFIER",
                                            "children": [
                                                {
                                                    "mimes": {
                                                        "text/plain": "image"
                                                    }
                                                }
                                            ]
                                        },
                                        {
                                            "attributes": {},
                                            "tag": "CST_BRACKET",
                                            "children": [
                                                {
                                                    "mimes": {
                                                        "text/plain": ")\n"
                                                    }
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "attributes": {},
                    "tag": "CST_DEFINITION",
                    "children": [
                        {
                            "attributes": {},
                            "tag": "CST_OPERATOR",
                            "children": [
                                {
                                    "attributes": {},
                                    "tag": "CST_IDENTIFIER",
                                    "children": [
                                        {
                                            "mimes": {
                                                "text/plain": "tfm "
                                            }
                                        }
                                    ]
                                },
                                {
                                    "attributes": {},
                                    "tag": "CST_OPERATOR",
                                    "children": [
                                        {
                                            "mimes": {
                                                "text/plain": "= "
                                            }
                                        }
                                    ]
                                },
                                {
                                    "attributes": {},
                                    "tag": "CST_call",
                                    "children": [
                                        {
                                            "attributes": {
                                                "reftype": "symbol",
                                                "document_id": "references/DataAugmentation.CenterResizeCrop"
                                            },
                                            "tag": "reference",
                                            "children": [
                                                {
                                                    "mimes": {
                                                        "text/plain": "CenterResizeCrop"
                                                    }
                                                }
                                            ]
                                        },
                                        {
                                            "attributes": {},
                                            "tag": "CST_BRACKET",
                                            "children": [
                                                {
                                                    "mimes": {
                                                        "text/plain": "("
                                                    }
                                                }
                                            ]
                                        },
                                        {
                                            "attributes": {},
                                            "tag": "CST_tuple",
                                            "children": [
                                                {
                                                    "attributes": {},
                                                    "tag": "CST_BRACKET",
                                                    "children": [
                                                        {
                                                            "mimes": {
                                                                "text/plain": "("
                                                            }
                                                        }
                                                    ]
                                                },
                                                {
                                                    "attributes": {},
                                                    "tag": "CST_INTEGER",
                                                    "children": [
                                                        {
                                                            "mimes": {
                                                                "text/plain": "128"
                                                            }
                                                        }
                                                    ]
                                                },
                                                {
                                                    "attributes": {},
                                                    "tag": "CST_PUNCTUATION",
                                                    "children": [
                                                        {
                                                            "mimes": {
                                                                "text/plain": ", "
                                                            }
                                                        }
                                                    ]
                                                },
                                                {
                                                    "attributes": {},
                                                    "tag": "CST_INTEGER",
                                                    "children": [
                                                        {
                                                            "mimes": {
                                                                "text/plain": "128"
                                                            }
                                                        }
                                                    ]
                                                },
                                                {
                                                    "attributes": {},
                                                    "tag": "CST_BRACKET",
                                                    "children": [
                                                        {
                                                            "mimes": {
                                                                "text/plain": ")"
                                                            }
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "attributes": {},
                                            "tag": "CST_BRACKET",
                                            "children": [
                                                {
                                                    "mimes": {
                                                        "text/plain": ")\n"
                                                    }
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "attributes": {},
                    "tag": "CST_DEFINITION",
                    "children": [
                        {
                            "attributes": {},
                            "tag": "CST_call",
                            "children": [
                                {
                                    "attributes": {
                                        "reftype": "symbol",
                                        "document_id": "references/DataAugmentation.apply"
                                    },
                                    "tag": "reference",
                                    "children": [
                                        {
                                            "mimes": {
                                                "text/plain": "apply"
                                            }
                                        }
                                    ]
                                },
                                {
                                    "attributes": {},
                                    "tag": "CST_BRACKET",
                                    "children": [
                                        {
                                            "mimes": {
                                                "text/plain": "("
                                            }
                                        }
                                    ]
                                },
                                {
                                    "attributes": {},
                                    "tag": "CST_IDENTIFIER",
                                    "children": [
                                        {
                                            "mimes": {
                                                "text/plain": "tfm"
                                            }
                                        }
                                    ]
                                },
                                {
                                    "attributes": {},
                                    "tag": "CST_PUNCTUATION",
                                    "children": [
                                        {
                                            "mimes": {
                                                "text/plain": ", "
                                            }
                                        }
                                    ]
                                },
                                {
                                    "attributes": {},
                                    "tag": "CST_IDENTIFIER",
                                    "children": [
                                        {
                                            "mimes": {
                                                "text/plain": "item"
                                            }
                                        }
                                    ]
                                },
                                {
                                    "attributes": {},
                                    "tag": "CST_BRACKET",
                                    "children": [
                                        {
                                            "mimes": {
                                                "text/plain": ")"
                                            }
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "attributes": {},
            "tag": "h2",
            "children": [
                {
                    "mimes": {
                        "text/plain": "Requirements"
                    }
                }
            ]
        },
        {
            "attributes": {},
            "tag": "p",
            "children": [
                {
                    "mimes": {
                        "text/plain": "The above example is simple, but there are more requirements of data augmentation pipelines that this library adresses"
                    }
                },
                {
                    "mimes": {
                        "text/plain": "."
                    }
                },
                {
                    "mimes": {
                        "text/plain": " They serve as a motivation to the interface I"
                    }
                },
                {
                    "mimes": {
                        "text/plain": "’"
                    }
                },
                {
                    "mimes": {
                        "text/plain": "ve arrived at for defining transformations"
                    }
                },
                {
                    "mimes": {
                        "text/plain": "."
                    }
                }
            ]
        },
        {
            "attributes": {},
            "tag": "h3",
            "children": [
                {
                    "mimes": {
                        "text/plain": "Stochasticity"
                    }
                }
            ]
        },
        {
            "attributes": {},
            "tag": "p",
            "children": [
                {
                    "mimes": {
                        "text/plain": "A transformation is stochastic (as opposed to deterministic) if it produces different outputs based on some random state"
                    }
                },
                {
                    "mimes": {
                        "text/plain": "."
                    }
                },
                {
                    "attributes": {},
                    "tag": "br",
                    "children": []
                },
                {
                    "mimes": {
                        "text/plain": "This randomness can become a problem when applying an transformation to an aligned pair of input and target"
                    }
                },
                {
                    "mimes": {
                        "text/plain": "."
                    }
                },
                {
                    "mimes": {
                        "text/plain": " If we have an image and a corresponding segmentation mask, using different scaling factors results in misalignment of the two; the segmentation no longer matches up with the image pixels"
                    }
                },
                {
                    "mimes": {
                        "text/plain": "."
                    }
                }
            ]
        },
        {
            "attributes": {},
            "tag": "p",
            "children": [
                {
                    "mimes": {
                        "text/plain": "To handle this, the random state is explicitly passed to the transformations, rendering them deterministic"
                    }
                },
                {
                    "mimes": {
                        "text/plain": "."
                    }
                },
                {
                    "mimes": {
                        "text/plain": " A generator for the random state can be defined with "
                    }
                },
                {
                    "attributes": {
                        "reftype": "symbol",
                        "document_id": "references/DataAugmentation.getrandstate"
                    },
                    "tag": "reference",
                    "children": [
                        {
                            "attributes": {},
                            "tag": "code",
                            "children": [
                                {
                                    "mimes": {
                                        "text/plain": "getrandstate"
                                    }
                                }
                            ]
                        }
                    ]
                },
                {
                    "attributes": {},
                    "tag": "code",
                    "children": [
                        {
                            "mimes": {
                                "text/plain": "(tfm)"
                            }
                        }
                    ]
                },
                {
                    "mimes": {
                        "text/plain": " and passed to "
                    }
                },
                {
                    "attributes": {},
                    "tag": "code",
                    "children": [
                        {
                            "mimes": {
                                "text/plain": "apply"
                            }
                        }
                    ]
                },
                {
                    "mimes": {
                        "text/plain": " with the "
                    }
                },
                {
                    "attributes": {},
                    "tag": "code",
                    "children": [
                        {
                            "mimes": {
                                "text/plain": "randstate"
                            }
                        }
                    ]
                },
                {
                    "mimes": {
                        "text/plain": " keyword argument"
                    }
                },
                {
                    "mimes": {
                        "text/plain": "."
                    }
                }
            ]
        },
        {
            "attributes": {},
            "tag": "h3",
            "children": [
                {
                    "mimes": {
                        "text/plain": "Composition"
                    }
                }
            ]
        },
        {
            "attributes": {},
            "tag": "p",
            "children": [
                {
                    "mimes": {
                        "text/plain": "Most data augmentation pipelines are made up of multiple steps: augmenting an image can mean resizing, randomly rotating, cropping and then normalizing the values"
                    }
                },
                {
                    "mimes": {
                        "text/plain": "."
                    }
                },
                {
                    "mimes": {
                        "text/plain": " So applying transformations one after another – sequencing – is one way to compose transformations"
                    }
                },
                {
                    "mimes": {
                        "text/plain": "."
                    }
                },
                {
                    "mimes": {
                        "text/plain": " But some operations, like affine transformations, can also be "
                    }
                },
                {
                    "attributes": {},
                    "tag": "em",
                    "children": [
                        {
                            "mimes": {
                                "text/plain": "fused"
                            }
                        }
                    ]
                },
                {
                    "mimes": {
                        "text/plain": ", resulting in a single transformation that is more performant and produces more accurate results"
                    }
                },
                {
                    "mimes": {
                        "text/plain": "."
                    }
                }
            ]
        },
        {
            "attributes": {},
            "tag": "h3",
            "children": [
                {
                    "mimes": {
                        "text/plain": "Buffering"
                    }
                }
            ]
        },
        {
            "attributes": {},
            "tag": "p",
            "children": [
                {
                    "mimes": {
                        "text/plain": "Since data augmentation pipelines often run on large amounts of data, performance can often be improved by using prealloacted output buffers for the transformations"
                    }
                },
                {
                    "mimes": {
                        "text/plain": "."
                    }
                },
                {
                    "mimes": {
                        "text/plain": " This results in fewer memory allocations and less garbage collection which both take time"
                    }
                },
                {
                    "mimes": {
                        "text/plain": "."
                    }
                }
            ]
        },
        {
            "attributes": {},
            "tag": "hr",
            "children": []
        },
        {
            "attributes": {},
            "tag": "p",
            "children": [
                {
                    "mimes": {
                        "text/plain": "Let"
                    }
                },
                {
                    "mimes": {
                        "text/plain": "’"
                    }
                },
                {
                    "mimes": {
                        "text/plain": "s next see how these requirements are reflected in the "
                    }
                },
                {
                    "attributes": {
                        "reftype": "document",
                        "href": "./iteminterface.md",
                        "title": "",
                        "document_id": "documents/docs/literate/iteminterface.md"
                    },
                    "tag": "reference",
                    "children": [
                        {
                            "mimes": {
                                "text/plain": "item"
                            }
                        }
                    ]
                },
                {
                    "mimes": {
                        "text/plain": " and "
                    }
                },
                {
                    "attributes": {
                        "reftype": "document",
                        "href": "./tfminterface.md",
                        "title": "",
                        "document_id": "documents/docs/literate/tfminterface.md"
                    },
                    "tag": "reference",
                    "children": [
                        {
                            "mimes": {
                                "text/plain": "transformation"
                            }
                        }
                    ]
                },
                {
                    "mimes": {
                        "text/plain": " interfaces"
                    }
                },
                {
                    "mimes": {
                        "text/plain": "."
                    }
                }
            ]
        }
    ]
}